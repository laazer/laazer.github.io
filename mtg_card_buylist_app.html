<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MTG Buylist Builder</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/glass.css">
</head>
<body>

<h1>üßô MTG Buylist Builder</h1>
<p>Multiple saved lists, search, and bulk actions.</p>

<div class="top-controls glass" style="padding:12px; margin-bottom:12px;">
  <select id="listSelect" onchange="loadList()"></select>
  <input id="newListName" type="text" placeholder="New list name" />
  <button onclick="createList()">New</button>
  <button onclick="deleteList()">Delete List</button>
</div>

<div class="layout">
  <div class="glass" style="padding:16px;">
    <textarea id="deckList" placeholder="1 Sol Ring
2 Forest"></textarea>
    <div class="controls">
      <button onclick="parseDeckList()">Parse</button>
      <input id="search" type="text" placeholder="Search cards" oninput="render()" />
      <button onclick="bulkDelete()">Delete Selected</button>
      <div class="column-toggle">
        <button onclick="document.getElementById('columnMenu').classList.toggle('hidden')">‚öôÔ∏è Columns</button>
        <div id="columnMenu" class="column-menu hidden glass">
          <label><input type="checkbox" id="col-manaCost" onchange="toggleColumn('manaCost')" checked> Mana Cost</label>
          <label><input type="checkbox" id="col-qty" onchange="toggleColumn('qty')" checked> Quantity</label>
          <label><input type="checkbox" id="col-price" onchange="toggleColumn('price')" checked> USD Price</label>
          <label><input type="checkbox" id="col-tcgplayerPrice" onchange="toggleColumn('tcgplayerPrice')" checked> TCG Price</label>
          <label><input type="checkbox" id="col-bought" onchange="toggleColumn('bought')" checked> Bought</label>
          <label><input type="checkbox" id="col-orderDetails" onchange="toggleColumn('orderDetails')" checked> Order Details</label>
        </div>
      </div>
    </div>

    <table>
      <thead>
        <tr id="tableHeader">
          <th><input type="checkbox" onclick="toggleAll(this)"></th>
          <th onclick="sortBy('name')">Card</th>
        </tr>
      </thead>
      <tbody id="cardTable"></tbody>
    </table>

    <div class="controls">
      <div class="pagination">
        Rows <select id="pageSize" onchange="render()"><option>10</option><option>25</option><option>50</option><option>100</option><option>250</option></select>
        <button onclick="page=Math.max(0,page-1);render()">‚óÄ</button>
        <button onclick="page++;render()">‚ñ∂</button>
      </div>
      <div><strong>Cards: <span id="cardCount">0</span> | Total: $<span id="total">0.00</span></strong></div>
      <button onclick="exportCSV(false)">Export Unbought</button>
      <button onclick="exportCSV(true)">Export All</button>
    </div>
  </div>

  <div class="glass image-panel" style="padding:16px; position:relative;">
    <div id="imgHint">Hover a card<br>to preview art</div>
    <div id="imgLoading" class="img-status" style="display:none;">
      <div class="spinner"></div>
      <div>Loading...</div>
    </div>
    <div id="imgError" class="img-status" style="display:none;">
      <div class="error-icon">‚ö†Ô∏è</div>
      <div>Image not found</div>
    </div>
    <img id="cardImage" />
    <button id="flipButton" onclick="flipCardFace()" style="display:none; position:absolute; top:16px; right:16px; z-index:10;">üîÑ Flip</button>
  </div>
</div>

<script src="js/mtg-buylist.js"></script>
</body>
</html>

